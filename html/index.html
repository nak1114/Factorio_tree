<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" href="css/jquery-ui.css" />
		<link rel="stylesheet" href="css/jquery.treetable.css" type="text/css" />
		<link rel="stylesheet" href="css/jquery.treetable.theme.default.css" type="text/css" />
		<script src="lib/jquery-1.12.2.js"></script>
		<script src="lib/jquery-ui.js"></script>
		<script src="lib/jquery.combobox.js"></script>
		<script src="lib/jquery.treetable.js"></script>
		<script src="js/factorio.js"></script>
		<script src="js/factorio-tree.js"></script>
		<script src="js/factorio-helper.js"></script>
		<title>Factorio Tree</title>
		<style type="text/css">
			.ui-autocomplete {
				max-height: 100px;
				overflow-y: auto;
				overflow-x: hidden;
				padding-right: 20px;
			}
			.custom-combobox-input {
				width: 500px;
			}
			.custom-combobox-icon {
				vertical-align: middle;
				width: 32px;
				height: 32px;
			}
			.name-icon {
				width: 32px;
				height: 32px;
			}
		</style>
		<script>
            $(function() {
                Factorio.helper.init("#main_table","recipes-core-0.12.1.jp.json", function() {
                    $("#combobox").html(Factorio.helper.options());
                    $("#combobox").combobox();
                    $("#product_counts").spinner({
                        min : 0,
                        icons : {
                            up : "ui-icon-plus",
                            down : "ui-icon-minus"
                        },
                    });
                    $('#add_product').button();
                    $('#add_product').click(function() {
                        var name,
                            val;
                        val = $("#combobox").children(':selected')[0].value;
                        if (val === undefined || val == '') {
                            return;
                        }
                        Factorio.tree.root($("#product_counts").spinner('value'), val);
                    });
                    $('#clear_product').button();
                    $('#clear_product').click(function() {
                        Factorio.tree.clear();
                    });
                });
            });
            $(function() {
                //				console.log(Factorio.helper.targets);
            });
		</script>
	</head>
	<body>
		<h1>Factorio Tree</h1>
		<div id='debug'></div>
		<div class="ui-widget">
			<label>target item: </label>
			<select id="combobox">
				<option value="">Select one...</option>
			</select>
			<input id="product_counts" value="1" size="1" />
			[units/sec]
			<button id='add_product'>
				add
			</button>
			<button id='clear_product'>
				clear
			</button>
		</div>
		<div>
			<table id='main_table'>
				<thead>
					<tr>
						<th width="1%">生産物名称</th>
						<th width="1%">要求生産速度[units/sec]</th>
						<th >生産施設</th>
						<!--
						<th>生産能力</th>
						<th>排出能力</th>
						<th>排出器</th>
						<th>要求挿入速度</th>
						<th>挿入能力</th>
						<th>挿入器</th>
						-->
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</body>
</html>
